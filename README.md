# Cypress Test Automation Starter Boilerplate
This project provides a comprehensive starter boilerplate for building test automation suites using Cypress. It's designed to help teams quickly set up new Cypress projects with a sensible default structure, pre-configured reporting (Allure), integrated visual regression testing capabilities, and common utility patterns. By using this boilerplate, you can accelerate your test automation efforts and ensure consistency across your projects.


## Prerequisites

You need to have the following tools installed:

*   Node.js (>=14.x recommended) [![nodejs](https://img.shields.io/badge/nodejs-v14X-red.svg)](https://nodejs.org/en/download)
*   Java JDK (>=8.x) - Required for Allure reports. [![java](https://img.shields.io/badge/java-v8-yellow.svg)](https://www.oracle.com/java/technologies/downloads/#java8)

| Name      | Version  | Notes                               |
| --------- | -------- | ----------------------------------- |
| Node.js   | >= 14.x  | For running Cypress and related tools |
| Java JDK  | >= 8.x   | Required by Allure for report generation |

## Table of Contents

- [Prerequisites](#prerequisites)
- [Project Directory Structure](#project-directory-structure)
- [Installation](#installation)
  - [Dependencies Installation](#dependencies-installation)
  - [Allure Reports Installation](#allure-reports-installation)
- [Running Tests & Development](#running-tests--development)
  - [Running All Tests with Allure Reporting](#running-all-tests-with-allure-reporting)
  - [Adding New Tests](#adding-new-tests)
  - [Using Custom Commands](#using-custom-commands)
  - [Visual Regression Testing](#visual-regression-testing)
- [Key Technologies & Concepts](#key-technologies--concepts)

## Project Directory Structure

This boilerplate follows a standard Cypress project structure, enhanced with configurations for visual testing and reporting:

```gherkin
/
├── cypress/                            # Main folder for all test-related code
│   ├── e2e/                            # Contains all end-to-end (E2E) spec files
│   │   ├── image-diff/                 # Example tests for visual comparison using cypress-image-diff
│   │   │   └── visual-testing-cypress.cy.js
│   │   ├── percy/                      # Example tests for visual testing with Percy (if integrated)
│   │   │   └── visual-testing-percy.cy.js
│   │   └── register.cy.js              # Example E2E test file
│   ├── fixtures/                       # Stores static data for your tests
│   │   ├── data.json                   # Example data file
│   │   └── pages.json                  # Example data file for page-specific info
│   ├── support/                        # Reusable components, custom commands, and global configurations
│   │   ├── commands/                   # Custom Cypress commands
│   │   │   ├── login-commands.js       # Example custom commands for login
│   │   │   └── register-commands.js    # Example custom commands for registration
│   │   ├── elements/                   # UI element selectors/locators
│   │   │   ├── home-elements.js        # Example element definitions for the home page
│   │   │   ├── login-elements.js       # Example element definitions for the login page
│   │   │   └── register-elements.js    # Example element definitions for the register page
│   │   ├── e2e.js                      # Main support file, executed before each spec file. Ideal for global setup & importing commands.
│   │   └── utilities.js                # Common helper functions used across tests
│   ├── docs/                           # Contains documentation-related files (e.g., type definitions)
│   │   └── documentation.d.ts
│   └── tsconfig.json                   # TypeScript configuration for Cypress (if using TypeScript)
├── allure-results/                     # Stores raw output data from Allure reporter after test execution
├── cypress-image-diff.config.cjs       # Configuration file for the cypress-image-diff plugin
├── cypress-visual-html-report/         # Stores HTML reports generated by cypress-visual-report
├── cypress-visual-screenshots/         # Stores baseline, comparison, and diff images for visual tests
│   ├── baseline/
│   ├── comparison/
│   └── diff/
├── .gitignore                          # Specifies intentionally untracked files that Git should ignore
├── browserstack.json                   # Configuration file for BrowserStack (if used)
├── cypress.config.js                   # Main Cypress configuration file (baseUrl, viewport settings, plugins, etc.)
├── package-lock.json                   # Records exact versions of dependencies
├── package.json                        # Manages project dependencies, scripts, and metadata
└── README.md                           # This file!
```
**Key Configuration Files:**
*   `cypress.config.js`: The heart of your Cypress setup. Configure test behavior, environment variables, and plugins here.
*   `package.json`: Defines project dependencies (like Cypress itself, reporting tools) and useful scripts (e.g., for running tests).
*   `cypress-image-diff.config.cjs`: Tailor the behavior of the `cypress-image-diff` visual testing plugin.

**Visual Testing Folders:**
*   `cypress-visual-screenshots/`: This directory is crucial for `cypress-image-diff`.
    *   `baseline/`: Stores the approved "golden" images.
    *   `comparison/`: Stores images captured during the latest test run.
    *   `diff/`: Stores highlighted difference images when mismatches are found.
*   `cypress-visual-html-report/`: Contains the HTML report for visual tests, allowing easy review of any visual discrepancies.

**Reporting:**
*   `allure-results/`: Contains raw JSON files generated by the Allure reporter. These are then processed by Allure to create a comprehensive HTML report.

## Installation
​We use [NPM](https://nodejs.org/en), a cross-platform build automation tool that help with our full development flow. ​

* `git@github.hugeinc.com:stetovar/base_cypress_framework.git` this repository
* change into the new directory `cd base_cypress_framework`.
* you can import the project in Visual Studio, like [this](https://learn.microsoft.com/en-us/visualstudio/get-started/tutorial-open-project-from-repo?view=vs-2022)

### Dependencies Installation

npm install

### Allure Reports Installation

npm install -g allure-commandline --save-dev


## Running Tests & Development

### Running All Tests with Allure Reporting
To execute all tests and generate an Allure report:

```bash
# Run Cypress tests (this might vary based on your package.json scripts)
npx cypress run --env allure=true

# Generate the Allure report (after tests have run)
allure generate allure-results --clean -o allure-report

# Open the generated Allure report
allure open allure-report
```
*Note: The `npm install -g allure-commandline --save-dev` in the installation section makes the `allure` command globally available. If you prefer a project-local installation, you might run it via `npx allure`.*
*The LDAP note seems specific and might be removed for a general boilerplate, but I will keep it for now as instructed by the original README.*
Note: Only for LDAP, open the report url in Firefox.

### Adding New Tests

1.  **Create a new spec file:** Add your new test file (e.g., `my-new-feature.cy.js`) inside the `cypress/e2e/` directory or an appropriate subdirectory.
2.  **Write your tests:** Use Cypress commands and syntax to define your test cases.
    ```javascript
    // cypress/e2e/my-new-feature.cy.js
    describe('My New Feature', () => {
      it('should do something amazing', () => {
        cy.visit('/some-page');
        // Your test assertions and commands here
        cy.get('[data-cy="my-element"]').should('be.visible');
      });
    });
    ```
3.  **Run your test:** You can run a specific test file using the Cypress Test Runner (via `npx cypress open`) or by specifying the file in the run command (e.g., `npx cypress run --spec "cypress/e2e/my-new-feature.cy.js"`).

### Using Custom Commands

This boilerplate includes examples of custom commands in `cypress/support/commands/`. These commands are automatically imported via `cypress/support/e2e.js` and are available on the `cy` object in your tests.

**Example (assuming a `cy.login()` custom command):**
```javascript
// cypress/e2e/some-test.cy.js
describe('Some authenticated feature', () => {
  beforeEach(() => {
    // Example: using a custom command to log in
    cy.login('testuser', 'password123'); 
  });

  it('should allow access to authenticated page', () => {
    cy.visit('/dashboard');
    cy.contains('Welcome, Test User').should('be.visible');
  });
});
```
To add new custom commands, simply define them in a relevant file within `cypress/support/commands/` and they will be available in your tests. Refer to the official Cypress documentation for more details on creating custom commands.

### Visual Regression Testing
This boilerplate is set up with `cypress-image-diff` for visual testing.
-   Baseline images are stored in `cypress-visual-screenshots/baseline/`.
-   When tests run, new screenshots are taken and stored in `cypress-visual-screenshots/comparison/`.
-   If differences are found, diff images are generated in `cypress-visual-screenshots/diff/`.
-   An HTML report is generated in `cypress-visual-html-report/` to review changes.

To update baseline images (after verifying that the changes are intentional):
1. Delete the specific baseline image(s) you want to update from `cypress-visual-screenshots/baseline/`.
2. Re-run the tests. The newly captured comparison images will automatically become the new baseline.

Make sure to commit your updated baseline images to your repository.
## Key Technologies & Concepts

This boilerplate leverages several key technologies and concepts:

*   **Cypress:** For E2E web automation.
*   **Allure Reports:** For generating detailed and interactive test execution reports.
*   **Visual Regression Testing:** Using `cypress-image-diff` (or potentially other tools like Percy) to catch visual bugs.
*   **Page Object Model (POM) / App Actions:** While not strictly enforced, the structure (elements in `support/elements/`, commands in `support/commands/`) encourages organizing selectors and interactions, aligning with POM or App Action principles.
*   **DRY (Don't Repeat Yourself) & KISS (Keep It Simple, Stupid):** Guiding principles for writing maintainable test code.
*   **Node.js & NPM:** For managing dependencies and running scripts.

>Authors:  
>  Raptor Team :t-rex:
>  That's it, We hope you like it
